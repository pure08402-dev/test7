<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>杖劍傳說 第二賽季 養成評分計算器</title>
    
    <button onclick="window.location.href='https://pure08402-dev.github.io/test7/equip'">升級素材計算</button>
<style>
  body { font-family: "Microsoft JhengHei", sans-serif; margin: 0; padding: 10px; background: #f0f2f5; }
  h1 { text-align: center; margin-bottom: 15px; }

  .card {
    background: #fff; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    padding: 16px; margin-bottom: 20px;
  }
  .card h2 {
    margin-top: 0; font-size: 18px; border-left: 5px solid #4a90e2;
    padding-left: 8px; color: #333;
  }
  .field { margin-bottom: 12px; }
  label { display: block; margin-bottom: 4px; font-size: 14px; font-weight: bold; }
  input { width: 100%; padding: 8px; font-size: 14px; border: 1px solid #ccc; border-radius: 6px; }
  button {
    padding: 10px 18px; margin: 6px 4px; font-size: 14px; border: none; border-radius: 8px;
    cursor: pointer; color: #fff; background: #4a90e2; transition: 0.2s;
  }
  button:hover { background: #357abd; }
  .clear-btn { background: #d9534f; }
  .clear-btn:hover { background: #b52b27; }

  .result label { font-size: 15px; margin-top: 8px; display: block; }
  .star { color: #007bff; font-weight: bold; }

  /* Tooltip */
  .tooltip { position: relative; display: inline-block; cursor: pointer; }
  .tooltip .tiptext {
    visibility: hidden; width: 160px; background-color: #ffffe0; color: black;
    text-align: left; border: 1px solid #aaa; border-radius: 6px; padding: 6px;
    position: absolute; z-index: 1; top: -5px; left: 105%; font-size: 12px;
  }
  .tooltip:hover .tiptext { visibility: visible; }

  /* 表格樣式 */
  .table-container {
    overflow-x: auto;  /* 手機可橫向滑動 */
  }
  table {
    border-collapse: collapse; width: 100%; min-width: 500px;
  }
  th, td {
    border: 1px solid #ddd; padding: 6px 8px; text-align: center; font-size: 14px;
  }
  th { background: #4a90e2; color: white; }
  tr:nth-child(even) { background: #f9f9f9; }
  .highlight { background: #ffff99; font-weight: bold; }
</style>
</head>
<body>

<h1>杖劍傳說 第二賽季 </h1>
<h1>養成評分計算器</h1>

<!-- 計算器卡片 -->
<div class="card">
  <h2>輸入數值</h2>
  <div class="field tooltip">
    <label>人物等級</label>
    <input type="number" id="person" value="130" min="130" max="250">
    <span class="tiptext">建議 130 ~ 200</span>
  </div>

  <div class="field tooltip" style="color: red;"><label>裝備快速填入</label>
    <input type="number" id="weapon1" value="130" min="130" max="250">
    <span class="tiptext">裝備5件 ~ </span></div>

  <div class="field tooltip"><label>武器</label>
    <input type="number" id="weapon" value="130" min="130" max="250">
    <span class="tiptext">建議 130 ~ 200</span></div>
  <div class="field tooltip"><label>副手</label>
    <input type="number" id="assistant" value="130" min="130" max="250">
    <span class="tiptext">建議 130 ~ 200</span></div>
  <div class="field tooltip"><label>頭盔</label>
    <input type="number" id="headgear" value="130" min="130" max="250">
    <span class="tiptext">建議 130 ~ 200</span></div>
  <div class="field tooltip"><label>衣服</label>
    <input type="number" id="clothes" value="130" min="130" max="250">
    <span class="tiptext">建議 130 ~ 200</span></div>
  <div class="field tooltip"><label>鞋子</label>
    <input type="number" id="shoes" value="130" min="130" max="250">
    <span class="tiptext">建議 130 ~ 200</span></div>
  <div class="field tooltip"><label>技能等級</label>
    <input type="number" id="skill" value="130" min="130" max="250">
    <span class="tiptext">建議 130 ~ 200</span></div>

  <div class="field tooltip" style="color: red;"><label>幻獸快速填入</label>
    <input type="number" id="illusion5" value="130" min="130" max="250">
    <span class="tiptext">幻獸1 ~ 幻獸4</span></div>

  <div class="field tooltip"><label>幻獸1</label>
    <input type="number" id="illusion1" value="130" min="130" max="250">
    <span class="tiptext">建議 130 ~ 200</span></div>
  <div class="field tooltip"><label>幻獸2</label>
    <input type="number" id="illusion2" value="130" min="130" max="250">
    <span class="tiptext">建議 130 ~ 200</span></div>
  <div class="field tooltip"><label>幻獸3</label>
    <input type="number" id="illusion3" value="130" min="130" max="250">
    <span class="tiptext">建議 130 ~ 200</span></div>
  <div class="field tooltip"><label>幻獸4</label>
    <input type="number" id="illusion4" value="130" min="130" max="250">
    <span class="tiptext">建議 130 ~ 200</span></div>
  <div class="field tooltip"><label>遺物等級</label>
    <input type="number" id="relic_level" value="13" min="13" max="25">
    <span class="tiptext">建議 13 ~ 20</span></div>
  <div class="field tooltip"><label>遺物額外增加等級</label>
    <input type="number" id="relic_count" placeholder="無需填,有額外增加再填 " min="0" step="1">
    <span class="tiptext">額外增加等級總和</span></div>
</div>
</div>
  <button onclick="calculate()">計算</button>
  <button class="clear-btn" onclick="clearAll()">清除</button>
</div>

<!-- 結果卡片 -->
<div class="card result">
  <h2>計算結果</h2>
  <label>人物評分: <span id="person_score">0</span></label>
  <label>裝備評分: <span id="equip_score">0</span></label>
  <label>幻獸評分: <span id="illusion_score">0</span></label>
  <label>技能評分: <span id="skill_score">0</span></label>
  <label>遺物評分: <span id="relic_score">0</span></label>
  <label>總評分: <span id="total_score">0</span></label>
  <label class="star">🌟 原初之星: <span id="star">0</span></label>
</div>


<!-- 星數效果表卡片 -->
<div class="card">

<title>星數效果表</title>
  <style>
    body {
      font-family: "Microsoft JhengHei", sans-serif;
      background: #f4f6f9;
      margin: 20px;
    }

    h2 {
      color: #333;
      margin-bottom: 12px;
    }

    .table-container {
      max-width: 400px;   /* 限制表格最大寬度 */
      margin: 0;          /* 靠左 */
      overflow-x: auto;   /* 超出可橫向滑動 */
      background: #fff;
      border-radius: 10px;  /* 卡片圓角 */
      box-shadow: 0 2px 8px rgba(0,0,0,0.1); /* 陰影 */
      padding: 10px;
    }

    table {
      border-collapse: collapse;
      width: 80%;
      font-size: 8px;
    }

    th, td {

      padding: 6px 10px;
      text-align: center;
    }

    th {

    }

    tr:nth-child(even) {
      background-color: #f9f9f9;
    }

    .highlight {
      color: #d63384;
      font-weight: bold;
    }

    /* 手機版自動縮小 */
    @media (max-width: 320px) {
      .table-container {
        max-width: 300px;
      }

      table {

      font-size: 7px; /* 手機再縮小 */
      width: 90%;     /* 手機稍微放寬一點 */

      }
    }
  </style>
</head>
<body>

<!-- 輸入區 -->
<div style="margin-bottom: 20px;">
  <label for="s1value">請輸入 S1 原初之星：</label>
  <input type="number" id="s1value" value="0"  
  style="width:80px; padding:5px; font-size:14px;"
  min="0" step="1">
  <span class="tiptext">例如200</span>
  
  <button onclick="highlightStar()">計算原初之星總和</button>
    </div>
  <span id="totalDisplay" style="margin-left: 10px; font-weight: bold; color: #d63384;"></span>
</div>


  <h2>S1+S2獲得原初之星</h2>
  <div class="table-container">
    <table id="starTable">
      <tr><th>星數</th><th>效果</th><th>星數</th><th>效果</th></tr>
      <tr><td>48</td><td>攻擊</td></tr>
      <tr><td>56</td><td>升華3%</td></tr>
      <tr><td>64</td><td>防禦</td></tr>
      <tr><td>72</td><td>寶石5%</td></tr>
      <tr><td>80</td><td>生命</td></tr>
      <tr><td>88</td><td class="highlight">翻倍2%</td></tr>
      <tr><td>96</td><td>速度</td></tr>
      <tr><td>104</td><td class="highlight">經驗2%</td></tr>
      <tr><td>116</td><td>攻擊</td></tr>
      <tr><td>128</td><td>升華3%</td></tr>
      <tr><td>140</td><td>防禦</td></tr>
      <tr><td>152</td><td>寶石5%</td></tr>
      <tr><td>164</td><td>生命</td></tr>
      <tr><td>176</td><td class="highlight">翻倍2%</td></tr>
      <tr><td>188</td><td>速度</td></tr>
      <tr><td>200</td><td class="highlight">經驗2%</td></tr>
      <tr><td>215</td><td>攻擊</td></tr>
      <tr><td>230</td><td>升華3%</td></tr>
      <tr><td>245</td><td>防禦</td></tr>
      <tr><td>260</td><td>寶石5%</td></tr>
      <tr><td>275</td><td>生命</td></tr>
      <tr><td>290</td><td class="highlight">翻倍2%</td></tr>
      <tr><td>305</td><td>速度</td></tr>
      <tr><td>320</td><td class="highlight">經驗2%</td></tr>
      <tr><td>340</td><td>攻擊</td></tr>
      <tr><td>360</td><td>升華3%</td></tr>
      <tr><td>380</td><td>防禦</td></tr>
      <tr><td>400</td><td>寶石5%</td></tr>
      <tr><td>420</td><td>生命</td></tr>
      <tr><td>440</td><td class="highlight">翻倍2%</td></tr>
      <tr><td>460</td><td>速度</td></tr>
      <tr><td>480</td><td class="highlight">經驗2%</td></tr>
      <tr><td>505</td><td>攻擊</td></tr>
      <tr><td>530</td><td>升華3%</td></tr>
      <tr><td>555</td><td>防禦</td></tr>
      <tr><td>580</td><td>寶石5%</td></tr>
      <tr><td>605</td><td>生命</td></tr>
      <tr><td>630</td><td class="highlight">翻倍2%</td></tr>
      <tr><td>655</td><td>速度</td></tr>
      <tr><td>680</td><td class="highlight">經驗2%</td></tr>
      <tr><td>710</td><td>攻擊</td></tr>
      <tr><td>740</td><td>升華3%</td></tr>
      <tr><td>770</td><td>防禦</td></tr>
      <tr><td>800</td><td>寶石5%</td></tr>
      <tr><td>830</td><td>生命</td></tr>
      <tr><td>860</td><td class="highlight">翻倍2%</td></tr>
      <tr><td>890</td><td>速度</td></tr>
      <tr><td>920</td><td class="highlight">經驗2%</td></tr>
      <tr><td>955</td><td>攻擊</td></tr>
      <tr><td>990</td><td>升華3%</td></tr>
      <tr><td>1025</td><td>防禦</td></tr>
      <tr><td>1060</td><td>寶石5%</td></tr>
      <tr><td>1095</td><td>生命</td></tr>
      <tr><td>1130</td><td class="highlight">翻倍2%</td></tr>
      <tr><td>1165</td><td>速度</td></tr>
      <tr><td>1200</td><td class="highlight">經驗2%</td></tr>
      <tr><td>1240</td><td>攻擊</td></tr>
      <tr><td>1280</td><td>升華3%</td></tr>
      <tr><td>1320</td><td>防禦</td></tr>
      <tr><td>1360</td><td>寶石5%</td></tr>
      <tr><td>1400</td><td>生命</td></tr>
      <tr><td>1440</td><td class="highlight">翻倍2%</td></tr>
      <tr><td>1480</td><td>速度</td></tr>
      <tr><td>1520</td><td class="highlight">經驗2%</td></tr>
      <!-- 其餘項目可依需要繼續補上 -->
    </table>
  </div>
</div>

<script>
function highlightStar() {
  const s1 = parseInt(document.getElementById('s1value').value) || 0;
  const star = parseInt(document.getElementById('star').innerText) || 0;

  const total = s1 + star;

  // 顯示總和
  document.getElementById('totalDisplay').innerText = "總和: " + total;

  const rows = document.querySelectorAll('#starTable tr');
  rows.forEach(row => row.style.backgroundColor = ""); // 清除之前標記

  let maxRow = null;
  let maxValue = -Infinity;

  // 找出小於等於 total 的最大星數紅框
  for (let row of rows) {
    const td = row.cells[0]; // 星數欄位
    if (!td) continue;
    const value = parseInt(td.textContent);
    if (!isNaN(value) && value <= total && value > maxValue) {
      maxValue = value;
      maxRow = row;
    }
  }
if (maxRow) {
    maxRow.style.backgroundColor = "#ffd1dc"; // 標紅
  }
  console.log("S1 + 原初之星總和:", total, "標示星數:", maxValue);
    
  // 自動滾動到該行
  maxRow.scrollIntoView({ behavior: "smooth", block: "center" });
}    
</script>


<script>
function calculate() {
  try {
    let getVal = id => parseInt(document.getElementById(id).value) || 0;
    let person = getVal("person"),
        weapon = getVal("weapon"),
        assistant = getVal("assistant"),
        headgear = getVal("headgear"),
        clothes = getVal("clothes"),
        shoes = getVal("shoes"),
        skill = getVal("skill"),
        illusion1 = getVal("illusion1"),
        illusion2 = getVal("illusion2"),
        illusion3 = getVal("illusion3"),
        illusion4 = getVal("illusion4"),
        relic_level = getVal("relic_level"),
        relic_count = getVal("relic_count");

    let person_score = (person - 130) * 100;
    let G = weapon + assistant + headgear + clothes + shoes;
    let equip_score = (G - 650) * 18;
    let H = illusion1 + illusion2 + illusion3 + illusion4;
    let illusion_score = (H - 520) * 8;
    let skill_score = (skill - 130) * 8 * 7;
    let relic_score = ((relic_level - 13) * 20 + relic_count) * 33;
    let total_score = person_score + equip_score + illusion_score + skill_score + relic_score;
    let star = Math.floor(total_score / 27 + 45);

    document.getElementById("person_score").innerText = person_score;
    document.getElementById("equip_score").innerText = equip_score;
    document.getElementById("illusion_score").innerText = illusion_score;
    document.getElementById("skill_score").innerText = skill_score;
    document.getElementById("relic_score").innerText = relic_score;
    document.getElementById("total_score").innerText = total_score;
    document.getElementById("star").innerText = star;

  } catch (err) {
    document.getElementById("total_score").innerText = "輸入錯誤";
  }
}

function clearAll() {
  let ids = ["person","weapon1","weapon","assistant","headgear","clothes","shoes","skill",
             "illusion5","illusion1","illusion2","illusion3","illusion4","relic_level","relic_count"];
  ids.forEach(id => document.getElementById(id).value = "");
  ["person_score","equip_score","illusion_score","skill_score","relic_score","total_score","star"]
    .forEach(id => document.getElementById(id).innerText = "0");
}

// 監聽「裝備快速填入」欄位
document.getElementById("weapon1").addEventListener("input", function() {
  let val = parseInt(this.value) || "";
  ["weapon","assistant","headgear","clothes","shoes"].forEach(id => {
    document.getElementById(id).value = val;
  });
});

document.getElementById("illusion5").addEventListener("input", function() {
  let val = parseInt(this.value) || "";
  ["illusion1","illusion2","illusion3","illusion4"].forEach(id => {
    document.getElementById(id).value = val;
  });
});
</script>


</body>
</html>
