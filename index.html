<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ–åŠå‚³èªª è³½å­£ é¤Šæˆè©•åˆ†è¨ˆç®—å™¨</title>
    
	
<style>
/* ğŸ‘† å°ˆç”¨æ‰‹æŒ‡æŒ‰éˆ•è¨­è¨ˆ */
.nav-btn {
  display: inline-block;
  width: 85%;
  margin: 8px auto;
  padding: 14px;
  font-size: 17px;
  font-weight: bold;
  color: #fff;
  background: linear-gradient(90deg, #4a90e2, #6fa8dc);
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.25s ease;
  box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}

/* æŒ‰éˆ•å‹•ç•«æ•ˆæœ */
@keyframes tap {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-3px); }
}
.nav-btn:hover {
  animation: tap 0.35s ease-in-out;
  background: linear-gradient(90deg, #357abd, #5b8fd8);
  box-shadow: 0 6px 14px rgba(0,0,0,0.2);
}
</style>	

<style>
body { 
  font-family: "Microsoft JhengHei", sans-serif; 
  margin: 0; 
  padding: 10px; 
  background: #f0f2f5; 
}

h1 { 
  text-align: center; 
  margin-bottom: 15px; 
}

.card {
  background: #fff; 
  border-radius: 12px; 
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  padding: 16px; 
  margin-bottom: 20px;
}

.card h2 {
  margin-top: 0; 
  font-size: 18px; 
  border-left: 5px solid #4a90e2;
  padding-left: 8px; 
  color: #333;
}

.field { 
  margin-bottom: 12px; 
}

label { 
  display: block; 
  margin-bottom: 4px; 
  font-size: 14px; 
  font-weight: bold; 
}

input { 
  width: 100%;              /* ä½”æ»¿å…¨å¯¬ */
  padding: 12px;            /* æ‰‹æ©Ÿä¸Šæ›´å¥½é»æ“Š */
  font-size: 16px;          /* å­—é«”æ”¾å¤§ */
  border: 1px solid #ccc; 
  border-radius: 6px; 
  box-sizing: border-box;   /* é¿å…è¶…å‡ºå®¹å™¨ */
}

button {
  width: 100%;              /* ä½”æ»¿å…¨å¯¬ */
  padding: 12px;            /* æé«˜å¯é»æ“Šç¯„åœ */
  font-size: 16px;          /* å­—é«”æ”¾å¤§ */
  font-weight: bold;        /* æ‰‹æ©Ÿä¸Šæ›´æ¸…æ™° */
  border: none; 
  border-radius: 8px;
  cursor: pointer; 
  color: #fff; 
  background: #4a90e2; 
  transition: 0.2s;
}

button:hover { 
  background: #357abd; 
}

    .arrow {
      display: inline-block;
      transition: transform 0.3s ease;
    }
    .rotate {
      transform: rotate(180deg);
    }
    /* å¡ç‰‡æ”¶åˆå‹•ç•« */
    #multiplierCard {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease, padding 0.3s ease;
      background: #fff;
      border-radius: 12px;
      margin-top: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      padding: 0 15px;
    }
    #multiplierCard.show {
      max-height: 1000px; /* è¶³å¤ å±•é–‹ */
      padding: 15px;
    }
    .btn-group {
      margin-top: 15px;
      text-align: right;
    }
    .btn-group button:nth-child(2) {
      background-color: #28a745; /* ç¶ è‰² æ¢å¾© */
    }
    .btn-group button:nth-child(2):hover {
      background-color: #1e7e34;
    }
    .btn-group button:nth-child(3) {
      background-color: #dc3545; /* ç´…è‰² æ¸…é™¤ */
    }
    .btn-group button:nth-child(3):hover {
      background-color: #a71d2a;
    }	
	

.clear-btn { 
  background: #d9534f; 
}

.clear-btn:hover { 
  background: #b52b27; 
}

.result label { 
  font-size: 15px; 
  margin-top: 8px; 
  display: block; 
}

.star { 
  color: #007bff; 
  font-weight: bold; 
}

/* Tooltip */
.tooltip { 
  position: relative; 
  display: inline-block; 
  cursor: pointer; 
}

.tooltip .tiptext {
  visibility: hidden; 
  width: 160px; 
  background-color: #ffffe0; 
  color: black;
  text-align: left; 
  border: 1px solid #aaa; 
  border-radius: 6px; 
  padding: 6px;
  position: absolute; 
  z-index: 1; 
  top: -5px; 
  left: 105%; 
  font-size: 12px;
}

.tooltip:hover .tiptext { 
  visibility: visible; 
}

/* è¡¨æ ¼æ¨£å¼ */
.table-container {
  width: 100%;
  overflow-x: hidden;  /* ä¸æ©«å‘æ»‘å‹• */
}

table {
  border-collapse: collapse;
  width: 100%;         /* è‡ªå‹•å¡«æ»¿å®¹å™¨ */
  table-layout: auto;  /* è‡ªå‹•èª¿æ•´æ¬„ä½å¯¬åº¦ */
}

th, td {
  border: 1px solid #ddd;
  text-align: center;
  word-break: break-word; /* é¿å…æ–‡å­—æº¢å‡º */
}

th {
  background: #4a90e2;
  color: white;
}

tr:nth-child(even) {
  background: #f9f9f9;
}

.highlight {
  background: #ffff99;
  font-weight: bold;
}

/* æ‰‹æ©Ÿè¢å¹•é©é… */
@media (max-width: 480px) {
  h2 { font-size: 18px; }
  input, button { font-size: 16px; padding: 14px; }
  .result { font-size: 14px; }
}


</style>
</head>
<body>

<h1>æ–åŠå‚³èªª è³½å­£ </h1>
<h1>é¤Šæˆè©•åˆ†è¨ˆç®—å™¨</h1>

<!-- ğŸ‘† åŠŸèƒ½æŒ‰éˆ•å€ -->
<div class="card" style="text-align: center;">
  <button class="nav-btn" onclick="window.location.href='https://pure08402-dev.github.io/test7/equip'">ğŸ‘†&nbsp;&nbsp;&nbsp;&nbsp; S2å‡ç´šç´ æè¨ˆç®—</button>
  <button class="nav-btn" onclick="window.location.href='https://pure08402-dev.github.io/test7/Trolley'">ğŸ‘†&nbsp;&nbsp;&nbsp;&nbsp; æ‰‹æ¨è»Šå¤©æ•¸è¨ˆç®—</button>
  <button class="nav-btn" onclick="window.location.href='https://pure08402-dev.github.io/test7/time_one'">ğŸ‘†&nbsp;&nbsp;&nbsp;&nbsp; åŸåˆä¹‹æ˜Ÿé”æ¨™è¨ˆç®—</button>
</div>

<div class="card">
<h2>S2åŸåˆä¹‹æ˜Ÿ</h2>
<div class="field">
<label><input type="checkbox" id="mul_s2"> S2 é¸é …(åŸºåº•45)</label>
</div>
<div class="field">
<label><input type="checkbox" id="mul_s3"> S3 é¸é …(åŸºåº•65)</label>
</div>

<button type="button" id="toggleBtn" onclick="toggleMultiplier()">
<span id="arrow" class="arrow">â–¼</span>
<span id="btnText">å±•é–‹å€ç‡è¨­å®š</span>
</button>

<div class="card" id="multiplierCard">
<h2>å€ç‡è¨­å®š</h2>
<div class="field"><label>äººç‰©å€ç‡</label><input type="number" id="mul_person" value="100"></div>
<div class="field"><label>è£å‚™å€ç‡</label><input type="number" id="mul_equip" value="18"></div>
<div class="field"><label>å¹»ç¸å€ç‡</label><input type="number" id="mul_illusion" value="8"></div>
<div class="field"><label>æŠ€èƒ½å€ç‡</label><input type="number" id="mul_skill" value="7"></div>
<div class="field"><label>éºç‰©å€ç‡</label><input type="number" id="mul_relic" value="33"></div>
<div class="field"><label>æ˜Ÿæ•¸é™¤æ•¸</label><input type="number" id="mul_star_div" value="27"></div>
<div class="field"><label>æ˜Ÿæ•¸åŸºåº•</label><input type="number" id="mul_star_base" value="45"></div>

<div class="btn-group">
<button type="button" onclick="saveMultiplier()">ğŸ’¾ å„²å­˜å€ç‡</button>
<button type="button" onclick="resetMultiplier()">â™»ï¸ æ¢å¾©é è¨­</button>
<button type="button" onclick="clearMultiplier()">ğŸ—‘ï¸ æ¸…é™¤å„²å­˜</button>
</div>
</div>
</div>

<div class="card">
<div class="field tooltip">
<label>äººç‰©ç­‰ç´š
<span style="color:#007bff; font-weight:bold;">(å€ç‡: <span id="personMulDisplay">100</span>)</span>
</label>
<input type="number" id="person" value="130" min="130" max="250"><span class="tiptext">S2å»ºè­°:130 ~ ,S3å»ºè­°:160 ~ </span></div>
<span id="personFormula" style="color: gray; margin-left:10px;">#(äººç‰©ç­‰ç´š - 130) Ã— å€ç‡</span>
</div>


<div class="card">
<div class="field tooltip" style="color: red;">
<label>è£å‚™ç­‰ç´š
<span style="color:#28a745; font-weight:bold;">(å€ç‡: <span id="equipMulDisplay">18</span>)</span>
</label>

<input type="number" id="weapon1" value="130" min="130" max="250"><span class="tiptext">è£å‚™5ä»¶ ~ </span>
</div>
<span id="equipFormula" style="color: gray; margin-left:10px;">#(5ä»¶ç¸½å’Œ - 650) Ã— å€ç‡</span>
<button type="button" onclick="toggleSection('equipCard','equipArrow','equipBtnText','å±•é–‹è£å‚™ç´°é …','æ”¶åˆè£å‚™ç´°é …')">
  <span id="equipArrow" class="arrow">â–¼</span>
  <span id="equipBtnText">å±•é–‹è£å‚™ç´°é …</span>
</button>
<div id="equipCard" style="display:none; margin-top:10px;">
<div style="display:flex; gap:20px; flex-wrap: wrap;">
<div class="field tooltip"><label>æ­¦å™¨</label><input type="number" id="weapon" value="130" min="130" max="250"><span class="tiptext">S2å»ºè­°:130 ~ ,S3å»ºè­°:160 ~ </span></div>
<div class="field tooltip"><label>å‰¯æ‰‹</label><input type="number" id="assistant" value="130" min="130" max="250"><span class="tiptext">S2å»ºè­°:130 ~ ,S3å»ºè­°:160 ~ </span></div>
<div class="field tooltip"><label>é ­ç›”</label><input type="number" id="headgear" value="130" min="130" max="250"><span class="tiptext">S2å»ºè­°:130 ~ ,S3å»ºè­°:160 ~ </span></div>
<div class="field tooltip"><label>è¡£æœ</label><input type="number" id="clothes" value="130" min="130" max="250"><span class="tiptext">S2å»ºè­°:130 ~ ,S3å»ºè­°:160 ~ </span></div>
<div class="field tooltip"><label>é‹å­</label><input type="number" id="shoes" value="130" min="130" max="250"><span class="tiptext">S2å»ºè­°:130 ~ ,S3å»ºè­°:160 ~ </span></div>
</div></div></div>



<div class="card">
<div class="field tooltip" style="color: red;">
<label>å¹»ç¸ç­‰ç´š
<span style="color:#ff9800; font-weight:bold;">(å€ç‡: <span id="illusionMulDisplay">8</span>)</span>
</label>
<input type="number" id="illusion5" value="130" min="130" max="250"><span class="tiptext">å¹»ç¸1 ~ å¹»ç¸4</span>
</div>
<span id="illusionFormula" style="color: gray; margin-left:10px;">#(4å€‹ç¸½å’Œ - 520) Ã— å€ç‡</span>
<button type="button" onclick="toggleSection('equipCard1','equipArrow1','equipBtnText1','å±•é–‹å¹»ç¸1 ~ 4','æ”¶åˆå¹»ç¸1 ~ 4')">
  <span id="equipArrow1" class="arrow">â–¼</span>
  <span id="equipBtnText1">å±•é–‹å¹»ç¸1 ~ 4</span>
</button>
<div id="equipCard1" style="display:none; margin-top:10px;">
<div style="display:flex; gap:20px; flex-wrap: wrap;">
<div class="field tooltip"><label>å¹»ç¸1</label><input type="number" id="illusion1" value="130" min="130" max="250"><span class="tiptext">S2å»ºè­°:130 ~ ,S3å»ºè­°:160 ~ </span></div>
<div class="field tooltip"><label>å¹»ç¸2</label><input type="number" id="illusion2" value="130" min="130" max="250"><span class="tiptext">S2å»ºè­°:130 ~ ,S3å»ºè­°:160 ~ </span></div>
<div class="field tooltip"><label>å¹»ç¸3</label><input type="number" id="illusion3" value="130" min="130" max="250"><span class="tiptext">S2å»ºè­°:130 ~ ,S3å»ºè­°:160 ~ </span></div>
<div class="field tooltip"><label>å¹»ç¸4</label><input type="number" id="illusion4" value="130" min="130" max="250"><span class="tiptext">S2å»ºè­°:130 ~ ,S3å»ºè­°:160 ~ </span></div>
</div></div></div>


<div class="card">
<div class="field tooltip">
<label>æŠ€èƒ½ç­‰ç´š(8å€‹)
<span style="color:#9c27b0; font-weight:bold;">(å€ç‡: <span id="skillMulDisplay">7</span>)</span>
</label>
<input type="number" id="skill" value="130" min="130" max="250"><span class="tiptext">S2å»ºè­°:130 ~ ,S3å»ºè­°:160 ~ </span>
</div>
+
<div class="field tooltip"><label>æŠ€èƒ½é¡å¤–å¢åŠ ç­‰ç´š</label><input type="number" id="skill_count" placeholder="ç„¡éœ€å¡«,æœ‰é¡å¤–å¢åŠ å†å¡« " min="0" step="1"><span class="tiptext">é¡å¤–å¢åŠ ç­‰ç´šç¸½å’Œ</span></div>
<br></br><span id="skillFormula" style="color: gray; margin-left:10px;">#(8å€‹ç¸½å’Œ - 1040) Ã— å€ç‡</span>
</div>


<div class="card">
<div class="field tooltip">
<label>éºç‰©ç­‰ç´š(20å€‹)
<span style="color:#e91e63; font-weight:bold;">(å€ç‡: <span id="relicMulDisplay">33</span>)</span>
</label>
<input type="number" id="relic_level" value="13" min="13" max="25"><span class="tiptext">S2å»ºè­°:13 ~ ,S3å»ºè­°:16 ~ </span>
</div>
+
<div class="field tooltip"><label>éºç‰©é¡å¤–å¢åŠ ç­‰ç´š</label><input type="number" id="relic_count" placeholder="ç„¡éœ€å¡«,æœ‰é¡å¤–å¢åŠ å†å¡« " min="0" step="1"><span class="tiptext">é¡å¤–å¢åŠ ç­‰ç´šç¸½å’Œ</span></div>
<br></br><span id="relicFormula" style="color: gray; margin-left:10px;">#(20å€‹ç¸½å’Œ - 260) Ã— å€ç‡</span>
</div>


<div class="card result">
<button onclick="calculate()">è¨ˆç®—</button><br></br>
<button class="clear-btn" onclick="clearAll()">é‡æ–°è¨ˆç®—</button>
<div class="card">
<h2>è¨ˆç®—çµæœ</h2>
<label>äººç‰©è©•åˆ†: <span id="person_score">0</span></label>
<label>è£å‚™è©•åˆ†: <span id="equip_score">0</span></label>
<label>å¹»ç¸è©•åˆ†: <span id="illusion_score">0</span></label>
<label>æŠ€èƒ½è©•åˆ†: <span id="skill_score">0</span></label>
<label>éºç‰©è©•åˆ†: <span id="relic_score">0</span></label>
<label>ç¸½è©•åˆ†: <span id="total_score">0</span></label>
<label class="star">ğŸŒŸ åŸåˆä¹‹æ˜Ÿ: <span id="star">0</span></label>
</div></div>


<!-- æ˜Ÿæ•¸è¡¨ -->
<div class="card">
<h2>åŸåˆä¹‹æ˜Ÿåƒè€ƒè¡¨</h2>
<div style="margin-bottom: 20px;">
  <label for="s1value">è«‹è¼¸å…¥ ç¾æœ‰ åŸåˆä¹‹æ˜Ÿï¼š</label>
  <input type="number" id="s1value" placeholder="ä¾‹å¦‚ 200" style="width:100px; padding:10px; font-size:16px;" min="0" step="1">
  <br><br>
  <button onclick="highlightStar()">è¨ˆç®—åŸåˆä¹‹æ˜Ÿç¸½å’Œ</button><br><br>
  <span id="totalDisplay" style="margin-left: 10px; font-weight: bold; color: #d63384;"></span>
</div>

  <div class="table-container">
    <table id="starTable">
      <tr><th>æ˜Ÿæ•¸</th><th>æ•ˆæœ</th></tr>
      <tr><td>48</td><td>æ”»æ“Š</td></tr>
      <tr><td>56</td><td>å‡è¯3%</td></tr>
      <tr><td>64</td><td>é˜²ç¦¦</td></tr>
      <tr><td>72</td><td>å¯¶çŸ³5%</td></tr>
      <tr><td>80</td><td>ç”Ÿå‘½</td></tr>
      <tr><td>88</td><td class="highlight">ç¿»å€2%</td></tr>
      <tr><td>96</td><td>é€Ÿåº¦</td></tr>
      <tr><td>104</td><td class="highlight">ç¶“é©—2%</td></tr>
      <tr><td>116</td><td>æ”»æ“Š</td></tr>
      <tr><td>128</td><td>å‡è¯3%</td></tr>
      <tr><td>140</td><td>é˜²ç¦¦</td></tr>
      <tr><td>152</td><td>å¯¶çŸ³5%</td></tr>
      <tr><td>164</td><td>ç”Ÿå‘½</td></tr>
      <tr><td>176</td><td class="highlight">ç¿»å€2%</td></tr>
      <tr><td>188</td><td>é€Ÿåº¦</td></tr>
      <tr><td>200</td><td class="highlight">ç¶“é©—2%</td></tr>
      <tr><td>215</td><td>æ”»æ“Š</td></tr>
      <tr><td>230</td><td>å‡è¯3%</td></tr>
      <tr><td>245</td><td>é˜²ç¦¦</td></tr>
      <tr><td>260</td><td>å¯¶çŸ³5%</td></tr>
      <tr><td>275</td><td>ç”Ÿå‘½</td></tr>
      <tr><td>290</td><td class="highlight">ç¿»å€2%</td></tr>
      <tr><td>305</td><td>é€Ÿåº¦</td></tr>
      <tr><td>320</td><td class="highlight">ç¶“é©—2%</td></tr>
      <tr><td>340</td><td>æ”»æ“Š</td></tr>
      <tr><td>360</td><td>å‡è¯3%</td></tr>
      <tr><td>380</td><td>é˜²ç¦¦</td></tr>
      <tr><td>400</td><td>å¯¶çŸ³5%</td></tr>
      <tr><td>420</td><td>ç”Ÿå‘½</td></tr>
      <tr><td>440</td><td class="highlight">ç¿»å€2%</td></tr>
      <tr><td>460</td><td>é€Ÿåº¦</td></tr>
      <tr><td>480</td><td class="highlight">ç¶“é©—2%</td></tr>
      <tr><td>505</td><td>æ”»æ“Š</td></tr>
      <tr><td>530</td><td>å‡è¯3%</td></tr>
      <tr><td>555</td><td>é˜²ç¦¦</td></tr>
      <tr><td>580</td><td>å¯¶çŸ³5%</td></tr>
      <tr><td>605</td><td>ç”Ÿå‘½</td></tr>
      <tr><td>630</td><td class="highlight">ç¿»å€2%</td></tr>
      <tr><td>655</td><td>é€Ÿåº¦</td></tr>
      <tr><td>680</td><td class="highlight">ç¶“é©—2%</td></tr>
      <tr><td>710</td><td>æ”»æ“Š</td></tr>
      <tr><td>740</td><td>å‡è¯3%</td></tr>
      <tr><td>770</td><td>é˜²ç¦¦</td></tr>
      <tr><td>800</td><td>å¯¶çŸ³5%</td></tr>
      <tr><td>830</td><td>ç”Ÿå‘½</td></tr>
      <tr><td>860</td><td class="highlight">ç¿»å€2%</td></tr>
      <tr><td>890</td><td>é€Ÿåº¦</td></tr>
      <tr><td>920</td><td class="highlight">ç¶“é©—2%</td></tr>
      <tr><td>955</td><td>æ”»æ“Š</td></tr>
      <tr><td>990</td><td>å‡è¯3%</td></tr>
      <tr><td>1025</td><td>é˜²ç¦¦</td></tr>
      <tr><td>1060</td><td>å¯¶çŸ³5%</td></tr>
      <tr><td>1095</td><td>ç”Ÿå‘½</td></tr>
      <tr><td>1130</td><td class="highlight">ç¿»å€2%</td></tr>
      <tr><td>1165</td><td>é€Ÿåº¦</td></tr>
      <tr><td>1200</td><td class="highlight">ç¶“é©—2%</td></tr>
      <tr><td>1240</td><td>æ”»æ“Š</td></tr>
      <tr><td>1280</td><td>å‡è¯3%</td></tr>
      <tr><td>1320</td><td>é˜²ç¦¦</td></tr>
      <tr><td>1360</td><td>å¯¶çŸ³5%</td></tr>
      <tr><td>1400</td><td>ç”Ÿå‘½</td></tr>
      <tr><td>1440</td><td class="highlight">ç¿»å€2%</td></tr>
      <tr><td>1480</td><td>é€Ÿåº¦</td></tr>
      <tr><td>1520</td><td class="highlight">ç¶“é©—2%</td></tr>
      <tr><td>1565</td><td>æ”»æ“Š</td></tr>
      <tr><td>1610</td><td>å‡è¯3%</td></tr>
      <tr><td>1655</td><td>é˜²ç¦¦</td></tr>
      <tr><td>1700</td><td>å¯¶çŸ³5%</td></tr>
      <tr><td>1745</td><td>ç”Ÿå‘½</td></tr>
      <tr><td>1790</td><td class="highlight">ç¿»å€2%</td></tr>
      <tr><td>1835</td><td>é€Ÿåº¦</td></tr>
      <tr><td>1880</td><td class="highlight">ç¶“é©—2%</td></tr>
      <tr><td>1940</td><td>æ”»æ“Š</td></tr>
      <tr><td>2000</td><td>å‡è¯3%</td></tr>
      <tr><td>2060</td><td>é˜²ç¦¦</td></tr>
      <tr><td>2120</td><td>å¯¶çŸ³5%</td></tr>
      <tr><td>2180</td><td>ç”Ÿå‘½</td></tr>
      <tr><td>2240</td><td class="highlight">ç¿»å€2%</td></tr>
      <tr><td>2300</td><td>é€Ÿåº¦</td></tr>
      <tr><td>2360</td><td class="highlight">ç¶“é©—2%</td></tr>
      <tr><td>2425</td><td>æ”»æ“Š</td></tr>
      <tr><td>2490</td><td>å‡è¯3%</td></tr>
      <tr><td>2555</td><td>é˜²ç¦¦</td></tr>
      <tr><td>2620</td><td>å¯¶çŸ³5%</td></tr>
      <tr><td>2685</td><td>ç”Ÿå‘½</td></tr>
      <tr><td>2750</td><td class="highlight">ç¿»å€2%</td></tr>
      <tr><td>2815</td><td>é€Ÿåº¦</td></tr>
      <tr><td>2880</td><td class="highlight">ç¶“é©—2%</td></tr>
      <tr><td>2950</td><td>æ”»æ“Š</td></tr>
      <tr><td>3020</td><td>å‡è¯3%</td></tr>
      <tr><td>3090</td><td>é˜²ç¦¦</td></tr>
      <tr><td>3160</td><td>å¯¶çŸ³5%</td></tr>
      <tr><td>3230</td><td>ç”Ÿå‘½</td></tr>
      <tr><td>3300</td><td class="highlight">ç¿»å€2%</td></tr>
      <tr><td>3370</td><td>é€Ÿåº¦</td></tr>
      <tr><td>3440</td><td class="highlight">ç¶“é©—2%</td></tr>
      <tr><td>3515</td><td>æ”»æ“Š</td></tr>
      <tr><td>3590</td><td>å‡è¯3%</td></tr>
      <tr><td>3665</td><td>é˜²ç¦¦</td></tr>
      <tr><td>3740</td><td>å¯¶çŸ³5%</td></tr>
      <tr><td>3815</td><td>ç”Ÿå‘½</td></tr>
      <tr><td>3890</td><td class="highlight">ç¿»å€2%</td></tr>
      <tr><td>3965</td><td>é€Ÿåº¦</td></tr>
      <tr><td>4040</td><td class="highlight">ç¶“é©—2%</td></tr>
      <tr><td>4120</td><td>æ”»æ“Š</td></tr>
      <tr><td>4200</td><td>å‡è¯3%</td></tr>
      <tr><td>4280</td><td>é˜²ç¦¦</td></tr>
      <tr><td>4360</td><td>å¯¶çŸ³5%</td></tr>
      <tr><td>4440</td><td>ç”Ÿå‘½</td></tr>
      <tr><td>4520</td><td class="highlight">ç¿»å€2%</td></tr>
      <tr><td>4600</td><td>é€Ÿåº¦</td></tr>
      <tr><td>4680</td><td class="highlight">ç¶“é©—2%</td></tr>
      <tr><td>4765</td><td>æ”»æ“Š</td></tr>
      <tr><td>4850</td><td>å‡è¯3%</td></tr>
      <tr><td>4935</td><td>é˜²ç¦¦</td></tr>
      <tr><td>5020</td><td>å¯¶çŸ³5%</td></tr>
      <tr><td>5105</td><td>ç”Ÿå‘½</td></tr>
      <tr><td>5190</td><td class="highlight">ç¿»å€2%</td></tr>
      <tr><td>5275</td><td>é€Ÿåº¦</td></tr>
      <tr><td>5360</td><td class="highlight">ç¶“é©—2%</td></tr>
		
      <!-- å…¶é¤˜é …ç›®å¯ä¾éœ€è¦ç¹¼çºŒè£œä¸Š -->
</table>
</div>
</div>
<footer style="margin-top: 20px; text-align: right; font-size: 14px; color: gray;">
  <span style="margin-right: 15px;">ç‰ˆæœ¬: 1.01</span>
  <span style="margin-right: 15px;">æ—¥æœŸ: 2025-11-05</span>
  <span>
    <a href="mailto:totpure@duck.com" style="color: black; font-weight: bold; text-decoration: underline;">
      å•é¡Œå›é¥‹
    </a>
  </span>
</footer>


<script>
let basePersonLevel = 130;
let baseRelicLevel = 13;

const defaultValues = { basePersonLevel:130, baseRelicLevel:13, person:100, equip:18, illusion:8, skill:7, relic:33, star_div:27, star_base:45 };
const s2Values = {...defaultValues};
const s3Values = { basePersonLevel:160, baseRelicLevel:16, person:100, equip:14, illusion:5, skill:6, relic:26, star_div:13, star_base:65 };

const inputs = {
  person: document.getElementById('mul_person'),
  equip: document.getElementById('mul_equip'),
  illusion: document.getElementById('mul_illusion'),
  skill: document.getElementById('mul_skill'),
  relic: document.getElementById('mul_relic'),
  star_div: document.getElementById('mul_star_div'),
  star_base: document.getElementById('mul_star_base')
};

const s2Checkbox = document.getElementById("mul_s2");
const s3Checkbox = document.getElementById("mul_s3");

// éœ€è¦åŒæ­¥èª¿æ•´çš„è¼¸å…¥æ¡†
const levelInputs = [
  "person","weapon1","weapon","assistant","headgear","clothes","shoes",
  "skill","illusion5","illusion1","illusion2","illusion3","illusion4"
].map(id => document.getElementById(id));

const relicLevel = document.getElementById("relic_level");

// å¥—ç”¨å€ç‡
function applyValues(values){
  for(let key in values){ if(inputs[key]) inputs[key].value = values[key]; }
  basePersonLevel = values.basePersonLevel;
  baseRelicLevel = values.baseRelicLevel;
}

// å¥—ç”¨ç­‰ç´š
function applyDefaultLevel(mode){
  if(mode === "S2"){
    levelInputs.forEach(input => input.value = 130);
    relicLevel.value = 13;
  }else if(mode === "S3"){
    levelInputs.forEach(input => input.value = 160);
    relicLevel.value = 16;
  }else{
    levelInputs.forEach(input => input.value = 130);
    relicLevel.value = 13;
  }
}

// å‹¾é¸åˆ‡æ›
function onCheckboxChange(option){
  if(option === "S2"){
    if(s2Checkbox.checked){
      s3Checkbox.checked = false;
      applyValues(s2Values);
      applyDefaultLevel("S2");
    }else{
      applyValues(defaultValues);
      applyDefaultLevel("default");
    }
  }else if(option === "S3"){
    if(s3Checkbox.checked){
      s2Checkbox.checked = false;
      applyValues(s3Values);
      applyDefaultLevel("S3");
    }else{
      applyValues(defaultValues);
      applyDefaultLevel("default");
    }
  }
}

s2Checkbox.addEventListener("change", ()=>onCheckboxChange("S2"));
s3Checkbox.addEventListener("change", ()=>onCheckboxChange("S3"));

function toggleMultiplier(){
  let card = document.getElementById('multiplierCard');
  let arrow = document.getElementById('arrow');
  if(card.classList.contains('show')){
    card.classList.remove('show'); arrow.classList.remove('rotate');
  }else{
    card.classList.add('show'); arrow.classList.add('rotate');
  }
}

function saveMultiplier(){ alert("å€ç‡å·²å„²å­˜ (æš«å­˜åŠŸèƒ½)"); }
function resetMultiplier(){ applyValues(defaultValues); }
function clearMultiplier(){ applyValues(defaultValues); s2Checkbox.checked=false; s3Checkbox.checked=false; }

function getVal(id){ return parseInt(document.getElementById(id).value)||0; }

///////////////////////////////////////////////////////////////////////////////////////////////////////////////  
function calculate(){
  let person_score=(getVal("person")-basePersonLevel)*getVal("mul_person");
  let equip_score=((getVal("weapon")+getVal("assistant")+getVal("headgear")+getVal("clothes")+getVal("shoes")-(basePersonLevel*5))*getVal("mul_equip"));
  let illusion_score=((getVal("illusion1")+getVal("illusion2")+getVal("illusion3")+getVal("illusion4")-(basePersonLevel*4))*getVal("mul_illusion"));
  let skill_score=((getVal("skill")-basePersonLevel)*8+getVal("skill_count"))*getVal("mul_skill");
  let relic_score=((getVal("relic_level")-baseRelicLevel)*20+getVal("relic_count"))*getVal("mul_relic");
  let total_score=person_score+equip_score+illusion_score+skill_score+relic_score;
  let star=Math.floor(total_score/getVal("mul_star_div")+getVal("mul_star_base"));

  document.getElementById("person_score").innerText=person_score;
  document.getElementById("equip_score").innerText=equip_score;
  document.getElementById("illusion_score").innerText=illusion_score;
  document.getElementById("skill_score").innerText=skill_score;
  document.getElementById("relic_score").innerText=relic_score;
  document.getElementById("total_score").innerText=total_score;
  document.getElementById("star").innerText=star;
}

function clearAll(){ location.reload(); }

///////////////////////////////////////////////////////////////////////////////////////////////////////////////  
// å¿«é€Ÿå¡«å…¥
document.getElementById("weapon1").addEventListener("input", function() {
  let val = parseInt(this.value) || "";
  ["weapon","assistant","headgear","clothes","shoes"].forEach(id => {
    document.getElementById(id).value = val;
  });
});

document.getElementById("illusion5").addEventListener("input", function() {
  let val = parseInt(this.value) || "";
  ["illusion1","illusion2","illusion3","illusion4"].forEach(id => {
    document.getElementById(id).value = val;
  });
});

///////////////////////////////////////////////////////////////////////////////////////////////////////////////  
function toggleSection(sectionId, arrowId, btnTextId, expandText, collapseText) {
  const section = document.getElementById(sectionId);
  const arrow = document.getElementById(arrowId);
  const btnText = document.getElementById(btnTextId);

  if (section.style.display === "none") {
    section.style.display = "block";
    arrow.textContent = "â–²";
    btnText.textContent = collapseText;
  } else {
    section.style.display = "none";
    arrow.textContent = "â–¼";
    btnText.textContent = expandText;
  }
}



///////////////////////////////////////////////////////////////////////////////////////////////////////////////  
function highlightStar() {
  const s1 = parseInt(document.getElementById('s1value').value) || 0;
  const star = parseInt(document.getElementById('star').innerText) || 0;
  const total = s1 + star;
  document.getElementById('totalDisplay').innerText = "ç¸½å’Œ: " + total;

  const rows = document.querySelectorAll('#starTable tr');
  rows.forEach(row => row.style.backgroundColor = "");

  let maxRow = null;
  let maxValue = -Infinity;
  for (let row of rows) {
    const td = row.cells[0];
    if (!td) continue;
    const value = parseInt(td.textContent);
    if (!isNaN(value) && value <= total && value > maxValue) {
      maxValue = value;
      maxRow = row;
    }
  }
  if (maxRow) {
    maxRow.style.backgroundColor = "#ffd1dc";
    maxRow.scrollIntoView({ behavior: "smooth", block: "center" });
  }
  console.log("S1 + åŸåˆä¹‹æ˜Ÿç¸½å’Œ:", total, "æ¨™ç¤ºæ˜Ÿæ•¸:", maxValue);
}

  window.addEventListener("DOMContentLoaded", () => {
    s2Checkbox.checked = true;
    onCheckboxChange("S2");
  });
  
///////////////////////////////////////////////////////////////////////////////////////////////////////////////  
function applyValues(values){
  for(let key in values){ 
    if(inputs[key]) inputs[key].value = values[key]; 
  }
  basePersonLevel = values.basePersonLevel;
  baseRelicLevel = values.baseRelicLevel;

  // æ›´æ–°å€ç‡é¡¯ç¤º
  document.getElementById("personMulDisplay").innerText   = values.person;
  document.getElementById("equipMulDisplay").innerText    = values.equip;
  document.getElementById("illusionMulDisplay").innerText = values.illusion;
  document.getElementById("skillMulDisplay").innerText    = values.skill;
  document.getElementById("relicMulDisplay").innerText    = values.relic;
}

inputs.person.addEventListener("input", () => {
  document.getElementById("personMulDisplay").innerText = inputs.person.value;
});
inputs.equip.addEventListener("input", () => {
  document.getElementById("equipMulDisplay").innerText = inputs.equip.value;
});
inputs.illusion.addEventListener("input", () => {
  document.getElementById("illusionMulDisplay").innerText = inputs.illusion.value;
});
inputs.skill.addEventListener("input", () => {
  document.getElementById("skillMulDisplay").innerText = inputs.skill.value;
});
inputs.relic.addEventListener("input", () => {
  document.getElementById("relicMulDisplay").innerText = inputs.relic.value;
});


function updateFormulas() {
  document.getElementById("personFormula").innerText   = `#(äººç‰©ç­‰ç´š - ${basePersonLevel}) Ã— å€ç‡`;
  document.getElementById("equipFormula").innerText    = `#(5ä»¶ç¸½å’Œ - ${basePersonLevel*5}) Ã— å€ç‡`;
  document.getElementById("illusionFormula").innerText = `#(4å€‹ç¸½å’Œ - ${basePersonLevel*4}) Ã— å€ç‡`;
  document.getElementById("skillFormula").innerText    = `#(8å€‹ç¸½å’Œ - ${basePersonLevel*8}) Ã— å€ç‡`;
  document.getElementById("relicFormula").innerText    = `#(20å€‹ç¸½å’Œ - ${baseRelicLevel*20}) Ã— å€ç‡`;
}


function onCheckboxChange(option){
  if(option === "S2"){
    if(s2Checkbox.checked){
      s3Checkbox.checked = false;
      applyValues(s2Values);
      applyDefaultLevel("S2");
    }else{
      applyValues(defaultValues);
      applyDefaultLevel("default");
    }
  }else if(option === "S3"){
    if(s3Checkbox.checked){
      s2Checkbox.checked = false;
      applyValues(s3Values);
      applyDefaultLevel("S3");
    }else{
      applyValues(defaultValues);
      applyDefaultLevel("default");
    }
  }
  updateFormulas(); // âœ… æ›´æ–°ç°è‰²å…¬å¼
}
  
  
</script>


</body>
</html>
