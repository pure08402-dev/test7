<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>杖劍傳說 第二賽季 養成評分計算器</title>
<style>
  body { font-family: "Microsoft JhengHei", sans-serif; padding: 10px; background: #f8f8f8; }
  h1 { text-align: center; }
  .frame { background: #fff; padding: 15px; margin-bottom: 15px; border-radius: 8px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
  .field { margin-bottom: 8px; }
  label { display: block; margin-bottom: 4px; }
  input { width: 100%; padding: 6px; font-size: 14px; }
  button { padding: 8px 16px; margin: 5px; font-size: 14px; cursor: pointer; }
  .result label { font-weight: bold; margin-top: 8px; display: block; }
  .star { color: blue; }
  .tooltip { position: relative; display: inline-block; cursor: pointer; }
  .tooltip .tiptext { 
    visibility: hidden; width: 140px; background-color: #ffffe0; color: black;
    text-align: left; border: 1px solid #aaa; border-radius: 4px; padding: 5px;
    position: absolute; z-index: 1; top: -5px; left: 105%; font-size: 12px;
  }
  .tooltip:hover .tiptext { visibility: visible; }
</style>
</head>
<body>

<h1>杖劍傳說 第二賽季 養成評分計算器</h1>

<div class="frame">
  <h2>輸入數值</h2>
  <div class="field tooltip">
    <label>人物等級</label>
    <input type="number" id="person" placeholder="130 ~ 200">
    <span class="tiptext">建議 130 ~ 200</span>
  </div>
  <div class="field tooltip">
    <label>武器</label>
    <input type="number" id="weapon" placeholder="130 ~ 200">
    <span class="tiptext">建議 130 ~ 200</span>
  </div>
  <div class="field tooltip">
    <label>副手</label>
    <input type="number" id="assistant" placeholder="130 ~ 200">
    <span class="tiptext">建議 130 ~ 200</span>
  </div>
  <div class="field tooltip">
    <label>頭盔</label>
    <input type="number" id="headgear" placeholder="130 ~ 200">
    <span class="tiptext">建議 130 ~ 200</span>
  </div>
  <div class="field tooltip">
    <label>衣服</label>
    <input type="number" id="clothes" placeholder="130 ~ 200">
    <span class="tiptext">建議 130 ~ 200</span>
  </div>
  <div class="field tooltip">
    <label>鞋子</label>
    <input type="number" id="shoes" placeholder="130 ~ 200">
    <span class="tiptext">建議 130 ~ 200</span>
  </div>
  <div class="field tooltip">
    <label>技能等級</label>
    <input type="number" id="skill" placeholder="130 ~ 200">
    <span class="tiptext">建議 130 ~ 200</span>
  </div>
  <div class="field tooltip">
    <label>幻獸1</label>
    <input type="number" id="illusion1" placeholder="130 ~ 200">
    <span class="tiptext">建議 130 ~ 200</span>
  </div>
  <div class="field tooltip">
    <label>幻獸2</label>
    <input type="number" id="illusion2" placeholder="130 ~ 200">
    <span class="tiptext">建議 130 ~ 200</span>
  </div>
  <div class="field tooltip">
    <label>幻獸3</label>
    <input type="number" id="illusion3" placeholder="130 ~ 200">
    <span class="tiptext">建議 130 ~ 200</span>
  </div>
  <div class="field tooltip">
    <label>幻獸4</label>
    <input type="number" id="illusion4" placeholder="130 ~ 200">
    <span class="tiptext">建議 130 ~ 200</span>
  </div>
  <div class="field tooltip">
    <label>遺物等級</label>
    <input type="number" id="relic_level" placeholder="13 ~ 20">
    <span class="tiptext">建議 13 ~ 20</span>
  </div>
  <div class="field tooltip">
    <label>遺物數量</label>
    <input type="number" id="relic_count" placeholder="20以下">
    <span class="tiptext">建議 20 以下</span>
  </div>
  <button onclick="calculate()">計算</button>
  <button onclick="clearAll()">清除</button>
</div>

<div class="frame result">
  <h2>計算結果</h2>
  <label>人物評分: <span id="person_score">0</span></label>
  <label>裝備評分: <span id="equip_score">0</span></label>
  <label>幻獸評分: <span id="illusion_score">0</span></label>
  <label>技能評分: <span id="skill_score">0</span></label>
  <label>遺物評分: <span id="relic_score">0</span></label>
  <label>總評分: <span id="total_score">0</span></label>
  <label class="star">🌟 原初之星: <span id="star">0</span></label>
</div>

<script>
function calculate() {
  try {
    let person = parseInt(document.getElementById("person").value) || 0;
    let weapon = parseInt(document.getElementById("weapon").value) || 0;
    let assistant = parseInt(document.getElementById("assistant").value) || 0;
    let headgear = parseInt(document.getElementById("headgear").value) || 0;
    let clothes = parseInt(document.getElementById("clothes").value) || 0;
    let shoes = parseInt(document.getElementById("shoes").value) || 0;
    let skill = parseInt(document.getElementById("skill").value) || 0;
    let illusion1 = parseInt(document.getElementById("illusion1").value) || 0;
    let illusion2 = parseInt(document.getElementById("illusion2").value) || 0;
    let illusion3 = parseInt(document.getElementById("illusion3").value) || 0;
    let illusion4 = parseInt(document.getElementById("illusion4").value) || 0;
    let relic_level = parseInt(document.getElementById("relic_level").value) || 0;
    let relic_count = parseInt(document.getElementById("relic_count").value) || 0;

    let person_score = (person - 130) * 100;
    let G = weapon + assistant + headgear + clothes + shoes;
    let equip_score = (G - 650) * 18;
    let H = illusion1 + illusion2 + illusion3 + illusion4;
    let illusion_score = (H - 520) * 8;
    let skill_score = (skill - 130) * 8 * 7;
    let relic_score = ((relic_level - 13) * 20 + relic_count) * 33;
    let total_score = person_score + equip_score + illusion_score + skill_score + relic_score;
    let star = Math.floor(total_score / 27 + 45);

    document.getElementById("person_score").innerText = person_score;
    document.getElementById("equip_score").innerText = equip_score;
    document.getElementById("illusion_score").innerText = illusion_score;
    document.getElementById("skill_score").innerText = skill_score;
    document.getElementById("relic_score").innerText = relic_score;
    document.getElementById("total_score").innerText = total_score;
    document.getElementById("star").innerText = star;

  } catch (err) {
    document.getElementById("total_score").innerText = "輸入錯誤";
  }
}

function clearAll() {
  let ids = ["person","weapon","assistant","headgear","clothes","shoes","skill",
             "illusion1","illusion2","illusion3","illusion4","relic_level","relic_count"];
  ids.forEach(id => document.getElementById(id).value = "");
  ["person_score","equip_score","illusion_score","skill_score","relic_score","total_score","star"]
    .forEach(id => document.getElementById(id).innerText = "0");
}
</script>

</body>
</html>
